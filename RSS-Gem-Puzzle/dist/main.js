(()=>{"use strict";class e{constructor(e){this.minutes=0,this.seconds=0,this.intervalId=null,this.container=e}startTimer(){this.resetTimer(),this.intervalId=setInterval((()=>{this.seconds++,this.minutes=this.seconds>59?Math.floor(this.seconds/60):0,this.setTimeText()}),1e3)}stopTimer(){clearInterval(this.intervalId)}continueTimer(e){this.startTimer(),this.seconds=e,this.minutes=this.seconds>59?Math.floor(this.seconds/60):0,this.setTimeText()}resetTimer(){clearInterval(this.intervalId),this.minutes=0,this.seconds=0,this.setTimeText()}setTimeText(){const e=this.minutes?this.seconds-60*this.minutes:this.seconds,t=this.minutes<10?`0${this.minutes}`:this.minutes,s=e<10?`0${e}`:e;this.container.textContent=`Time: ${t}:${s}`}saveDateTimer(){}}class t{board=[];lastGame=[];lastTime=0;lastMoves=0;constructor(){this.restoreBoard(),this.restoreLastGame()}restoreBoard(){localStorage.getItem("board")&&(this.board=localStorage.getItem("board"))}restoreLastGame(){localStorage.getItem("lastGame")&&(this.lastGame=JSON.parse(localStorage.getItem("lastGame"))),localStorage.getItem("lastTime")&&(this.lastTime=Number.parseInt(localStorage.getItem("lastTime"))),localStorage.getItem("lastMoves")&&(this.lastMoves=Number.parseInt(localStorage.getItem("lastMoves")))}saveGame(e,t,s){this.lastGame=JSON.parse(JSON.stringify(e)),localStorage.setItem("lastGame",JSON.stringify(e)),localStorage.setItem("lastTime",s),localStorage.setItem("lastMoves",t)}saveBoard(){}addResult(){}}const s=document.createElement("div");s.classList.add("wrapper"),document.body.appendChild(s);const i=document.createElement("div");i.classList.add("background_burger"),s.append(i);const a=document.createElement("div");a.classList.add("burger_menu"),i.append(a);const n=document.createElement("ul");n.classList.add("action_burger"),a.append(n);const o=document.createElement("li");o.classList.add("link_burger"),n.append(o);const d=document.createTextNode("Save");o.append(d);const l=document.createElement("li");l.classList.add("link_burger"),n.append(l);const c=document.createTextNode("Resume");l.append(c);const h=document.createElement("li");h.classList.add("link_burger"),n.append(h);const r=document.createTextNode("Scors");h.append(r);const u=document.createElement("li");u.classList.add("link_burger"),n.append(u);const m=document.createElement("div");m.classList.add("soundSet"),u.append(m);const v=document.createElement("label");v.classList.add("switch"),m.append(v);const p=document.createElement("input");p.type="checkbox",p.checked=!0,p.addEventListener("change",(e=>{Y.setAudioState(p.checked)})),v.append(p);const T=document.createElement("span");T.classList.add("round_toggle"),v.append(T);const g=document.createTextNode("Sound");m.append(g);const E=document.createElement("span");E.classList.add("close_burger"),n.append(E);const x=document.createElement("div");x.classList.add("playField"),s.append(x);const L=document.createElement("div");L.classList.add("gameName"),x.append(L);const f=document.createTextNode("Game of Fifteen");L.append(f);const S=document.createElement("div");S.classList.add("burger_menu_container"),x.append(S);const C=document.createElement("div");C.classList.add("burger_icon"),S.append(C);const b=document.createElement("span");b.classList.add("burger"),C.append(b);const w=document.createElement("span");w.classList.add("burger_line"),b.append(w);const N=document.createElement("button");N.classList.add("start"),S.append(N);const V=document.createTextNode("Shuffle and start");N.appendChild(V);const I=document.createElement("div");I.classList.add("buttons"),x.append(I);const k=document.createElement("button");k.classList.add("save_button"),I.append(k),k.addEventListener("click",(()=>{Y.saveGame()}));const A=document.createTextNode("Save");k.appendChild(A);const z=document.createElement("button");z.classList.add("resume_button"),I.append(z),z.addEventListener("click",(()=>{Y.resumeGame()}));const y=document.createTextNode("Resume");z.appendChild(y);const G=document.createElement("button");G.classList.add("scors_button"),I.append(G);const M=document.createTextNode("Scors");G.appendChild(M);const _=document.createElement("div");_.classList.add("soundSet"),I.append(_);const j=document.createElement("label");j.classList.add("switch"),_.append(j);const H=document.createElement("input");H.type="checkbox",H.checked=!0,H.addEventListener("change",(e=>{Y.setAudioState(H.checked)})),j.append(H);const F=document.createElement("span");F.classList.add("round_toggle"),j.append(F);const O=document.createTextNode("Sound");_.append(O);const $=document.createElement("div");$.classList.add("counts"),x.appendChild($);const B=document.createElement("div");B.classList.add("moves"),$.appendChild(B);const J=document.createElement("h3");J.textContent="Moves: 0",B.appendChild(J);const R=document.createElement("div");R.classList.add("time"),$.appendChild(R);const W=document.createElement("h3");R.appendChild(W);const X=document.createTextNode("Time: 00:00");W.appendChild(X);const Y=new class{tilesValue=[];coordinates=[];finalTiles=[];hoveredTile=null;isEnabled=!0;tileCount=4;canvasSize=400;moves=0;time=0;movesContainer;constructor(s,i,a){this.container=s,this.movesContainer=i,this.drawCanvas(),this.addEventHandlers(),this.tileSize=this.widthArea/this.tileCount,this.timer=new e(a),this.storage=new t}resumeGame(){this.storage.lastGame.length&&(this.tilesValue=this.storage.lastGame),this.storage.lastTime&&(this.seconds=this.storage.lastTime,this.timer.continueTimer(this.seconds)),this.storage.lastMoves&&(this.moves=this.storage.lastMoves,this.drawMovies(this.moves))}saveGame(){this.storage.saveGame(this.tilesValue,this.moves,this.timer.seconds)}updateSize(){this.heightArea!==this.canvas.clientHeight&&(this.heightArea=this.canvas.clientHeight,this.widthArea=this.canvas.clientWidth,this.tileSize=this.widthArea/this.tileCount,this.getCoordinates())}startNew(e=null){this.drawMovies(0),e&&this.setupValues(e),this.initTilesValue(),this.getCoordinates(),this.getFinalTiles(),this.drawTiles(),this.timer.startTimer()}drawMovies(e){this.moves=e,this.movesContainer.textContent=`Moves: ${e}`}setupValues(e){this.tileCount=e,this.tileSize=this.widthArea/this.tileCount}drawCanvas(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.canvasSize,this.canvas.height=this.canvasSize,this.container.appendChild(this.canvas),this.widthArea=this.canvas.clientWidth,this.heightArea=this.canvas.clientHeight}initTilesValue(){this.tilesValue=[];const e=[];for(let t=0;t<this.tileCount;t++){const t=[];for(let s=0;s<this.tileCount;s++)for(;t.length!==this.tileCount;){const s=Math.floor(Math.random()*this.tileCount**2);e.includes(s)||(t.push(s),e.push(s))}this.tilesValue.push(t)}}drawTiles(){this.ctx.clearRect(0,0,this.canvasSize,this.canvasSize);const e=this.canvasSize/this.tileCount;for(let t=0;t<this.tilesValue.length;t++)for(let s=0;s<this.tilesValue.length;s++){const i=s*e,a=t*e;if(this.tilesValue[t][s]){this.ctx.beginPath(),this.hoveredTile&&this.hoveredTile.x===i&&this.hoveredTile.y===a?this.ctx.fillStyle="#eb7d1e":this.ctx.fillStyle="white",this.ctx.rect(i,a,e-5,e-5),this.ctx.fill(),this.ctx.font="bold 32px Arial",this.ctx.fillStyle="gray",this.ctx.textAlign="left",this.ctx.textBaseline="middle";const n=this.tilesValue[t][s],o=e-this.ctx.measureText(n).width;this.ctx.fillText(this.tilesValue[t][s],i+o/2,a+e/2)}}requestAnimationFrame(this.drawTiles.bind(this))}getCoordinates(){this.coordinates=[];for(let e=0;e<this.tileCount;e++)for(let t=0;t<this.tileCount;t++)this.coordinates.push({i:e,j:t,x:t*this.tileSize,y:e*this.tileSize})}getFinalTiles(){const e=[];let t=1;for(let s=0;s<this.tileCount;s++){const s=[];for(let e=0;e<this.tileCount;e++)s.push(t),t++;e.push(s)}return e[e.length-1][this.tileCount-1]=0,e}addEventHandlers(){this.canvas.addEventListener("mousemove",(e=>{const t=e.offsetX,s=e.offsetY;this.hoveredTile=this.getHoveredTile(t,s)})),this.canvas.addEventListener("mouseout",(()=>{this.hoveredTile=null})),this.canvas.addEventListener("click",(e=>{const t=e.offsetX,s=e.offsetY;if(this.getAudio(),this.currentHover(t,s)){const e=0===this.tilesValue[this.hoveredTile.i]?.[this.hoveredTile.j+1]&&{i:this.hoveredTile.i,j:this.hoveredTile.j+1},t=0===this.tilesValue[this.hoveredTile.i]?.[this.hoveredTile.j-1]&&{i:this.hoveredTile.i,j:this.hoveredTile.j-1},s=0===this.tilesValue[this.hoveredTile.i-1]?.[this.hoveredTile.j]&&{i:this.hoveredTile.i-1,j:this.hoveredTile.j},i=0===this.tilesValue[this.hoveredTile.i+1]?.[this.hoveredTile.j]&&{i:this.hoveredTile.i+1,j:this.hoveredTile.j},a=e||t||s||i;if(a){const e=this.tilesValue[this.hoveredTile.i][this.hoveredTile.j];this.tilesValue[this.hoveredTile.i][this.hoveredTile.j]=0,this.tilesValue[a.i][a.j]=e,this.hoveredTile=null,this.drawMovies(this.moves+1)}}}))}getHoveredTile(e,t){return this.coordinates.find((s=>e>s.x&&e<s.x+this.tileSize&&t>s.y&&t<s.y+this.tileSize))}currentHover(e,t){return this.hoveredTile&&e>this.hoveredTile.x&&e<this.hoveredTile.x+this.tileSize&&t>this.hoveredTile.y&&t<this.hoveredTile.y+this.tileSize}checkFinal(){for(let e=0;e<this.tilesValue.length;e++)for(let t=0;t<this.tilesValue.length;t++)if(this.tilesValue[e][t]!==this.finalTiles[e][t])return!1;return!0}getAudio(){this.isEnabled&&new Audio("././Assets/audio/click.mp3").play()}setAudioState(e){this.isEnabled=e}gameOver(){}}(x,J,W),q=document.createElement("div");q.classList.add("frameSize"),x.appendChild(q);const D=document.createElement("ul");q.appendChild(D);const P=document.createTextNode("Other sizes:");D.appendChild(P),D.addEventListener("click",(e=>{const t=e.target;"LI"===t.tagName&&t.getAttribute("count")&&Y.startNew(Number.parseInt(t.getAttribute("count")))})),window.addEventListener("resize",(()=>{Y.updateSize()}));const K=["3x3","4x4","5x5","6x6","7x7","8x8"];for(let e=0;e<K.length;e++){const t=document.createElement("li");t.textContent=K[e],t.setAttribute("count",e+3),D.appendChild(t)}function Q(){Y.startNew()}!function(){function e(){i.classList.remove("active"),a.classList.remove("active")}C.addEventListener("click",(function(){i.classList.add("active"),a.classList.add("active")})),i.addEventListener("click",e),E.addEventListener("click",e)}(),N.addEventListener("click",Q),Q()})();